<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
    <div id="fade-obj" style="width:300px;height:300px;background:#000"></div>
    <button id="fade-btn">淡出</button>
    <script>
        var button=document.getElementById("fade-btn");
        var div=document.getElementById("fade-obj");
        var opacity=1;
        button.onclick=function(){
        if(opacity > 0){
            button.setAttribute("disabled", "disabled");
            setTimeout(fadeOut,100);
            }
        else{
            button.setAttribute("disabled", "disabled");
            setTimeout(fadeIn,100);
            }
        };
        function fadeOut(){
            if(opacity > 0) {
                opacity=opacity-0.1;
                div.style.opacity=opacity.toFixed(1).toString();
                setTimeout(fadeOut,100);
            }
            else{
                button.removeAttribute("disabled");
                button.innerHTML = "淡入";
            }
        }
        function fadeIn(){
            if(opacity < 1) {
                opacity=opacity+0.1;
                div.style.opacity=opacity.toFixed(1).toString();
                setTimeout(fadeIn,100);
            }
            else{
                button.removeAttribute("disabled");
                button.innerHTML = "淡出";
            }
        }
    </script>
</body>
</html>
